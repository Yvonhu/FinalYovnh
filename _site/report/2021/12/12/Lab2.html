<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="@regmtait">
  <link rel=icon href="/ theme-assets/favicon.svg" sizes="any" type="image/svg+xml">
  <title>Welcome to Lab2! • Toasty Jekyll</title>
  <meta name="description" content="Here is the report of Lab2">
  <meta name="keywords" content="Toasty Jekyll">

  <link rel="stylesheet" href=" /css/style.css">
  <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet"> 



<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3U7uwIvCyq01orxppAIC1v73y-FBGygY&callback=initMap"
    async defer></script>

    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('google-map'), {
          center: {lat: 53.7530398, lng: -0.3682561},
          zoom: 17,
        });

        var pointer = "/ theme-assets/map-pointer.svg";

        var marker = new google.maps.Marker({
          position: map.getCenter(),
          icon: pointer,
          map: map
        });

      }
    </script>



  <link rel="canonical" href="http://localhost:4000 /report/2021/12/12/Lab2.html">
  <link rel="alternate" type="application/rss+xml" title="Toasty Jekyll" href="http://localhost:4000 /feed.xml">

</head>

<body class="">

<header class="site-header cf">

<div class="wrapper">
	<nav class="site-nav">
		<a class="logo" href=" /" title="Toasty Jekyll home page">
		<img class="nav-logo" src=" /theme-assets/logo.svg" title="Toasty Jekyll logo" /></a>
		<ul>
  			<li data-wenk="Some news" data-wenk-pos="bottom" class="news"><a title="News" class="page-link" href=" /news/">News</a></li>
  			<li data-wenk="Successful case studies" data-wenk-pos="bottom" class="case-studies"><a title="Case studies" class="page-link" href=" /case-studies/">Case studies</a></li>
  			<li data-wenk="Some resources" data-wenk-pos="bottom" class="resources"><a title="Resources" class="page-link" href=" /resources/">Resources</a></li>
  			<li data-wenk="Contact details" data-wenk-pos="bottom" class="contact"><a title="Contact" class="page-link" href=" /contact/">Contact</a></li>
		</ul>
	</nav>
</div>

</header>

<div class="page-content">
 <div class="wrapper">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

<header class="post-header">
<h1 class="post-title" itemprop="name headline">Welcome to Lab2!</h1>
<p class="post-meta"><time datetime="2021-12-12T16:11:33+08:00" itemprop="datePublished">Dec 12, 2021</time></p>
</header>

<div class="post-content" itemprop="articleBody">
<p class="article-summary">Here is the report of Lab2</p>

<h3 id="back-to-home"><strong><em>Back to <a href="/">Home</a></em></strong></h3>

<h3 id="download"><strong><em><a href="https://github.com/Yvonhu/repo/tree/main/Lab2">Download</a></em></strong></h3>

<h3 id="document-api-for-library">Document API for library</h3>

<h4 id="class-table">class: Table</h4>
<blockquote>
  <p>{</p>

  <p><strong><em>method:</em></strong></p>
  <ul>
    <li><code class="highlighter-rouge">Table(int maxSize)</code>: constructor
      <ul>
        <li>input parameter: represents the maximum number of dishes that can be stored.</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">addDish()</code>: add a new dish to the Table.
      <ul>
        <li>Return value type: void</li>
        <li>input: none</li>
        <li>output: none</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">takeDish()</code>: Take away the first dish in Table.
      <ul>
        <li>Return value type: bool</li>
        <li>input: None</li>
        <li>output: the status of dish was taken away.</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">empty()</code>; Determine whether the number of dishes in the Table is 0
      <ul>
        <li>Return value type: bool</li>
        <li>Input: none</li>
        <li>Output: Is the quantity 0</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">printDishes()</code>; Print the current situation of the dishes of the Table
      <ul>
        <li>Return value: void</li>
        <li>Input: none</li>
        <li>Input: none</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">getDish(int index)</code>; returns the value of the dish at the specified position
      <ul>
        <li>Return value type: int</li>
        <li>Input: the location of the dish to be viewed</li>
        <li>Output: the value of the dish at the corresponding position</li>
      </ul>
    </li>
  </ul>

  <p><strong><em>Attributes:</em></strong></p>
  <ul>
    <li><code class="highlighter-rouge">maxSize</code>; Indicates the maximum capacity of the Table
      <ul>
        <li>Data type: int</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">count</code>; Indicates the number (position) of the current dish of the Table
      <ul>
        <li>Data type: int</li>
      </ul>
    </li>
  </ul>

  <p>};</p>

  <hr />
</blockquote>

<h4 id="class-customer">class Customer</h4>
<blockquote>
  <p>{</p>

  <p><strong><em>method:</em></strong></p>
  <ul>
    <li><code class="highlighter-rouge">Customer(int maxCount)</code>; Constructor
      <ul>
        <li>Input: indicates the maximum number of wanted</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">indexWanted(int e)</code>; returns the same wanted position as e
      <ul>
        <li>Return value type: int</li>
        <li>Input: the value to be judged</li>
        <li>Output: the position of the corresponding value (-1 means not found)</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">full()</code>; Determine whether the number of customers wanted is 0
      <ul>
        <li>Return value type: bool</li>
        <li>Input: None</li>
        <li>Output: Is the quantity 0</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">printWanted()</code>; Print the wanted situation of the current Customer
      <ul>
        <li>Return value: void</li>
        <li>Input: none</li>
        <li>Output: none</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">getWanted(int index)</code>; returns the wanted value at the specified position
      <ul>
        <li>Return value type: int</li>
        <li>Input: the wanted location to be viewed</li>
        <li>Output: the wanted value of the corresponding position</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">takeWanted(int index)</code>; remove wanted at the specified position
      <ul>
        <li>Return value type: bool</li>
        <li>Input: the wanted location to be removed</li>
        <li>Output: Boolean value of whether the removal was successful</li>
      </ul>
    </li>
  </ul>

  <p><strong><em>Attributes:</em></strong></p>
  <ul>
    <li><code class="highlighter-rouge">maxCount</code>; Indicates the maximum capacity of Customer
      <ul>
        <li>Data type: int</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">size</code>; indicates the number (position) of the customer currently wanted
      <ul>
        <li>Data type: int</li>
      </ul>
    </li>
  </ul>

  <p>};</p>

  <hr />
</blockquote>

<h4 id="class-tipbox">class TipBox</h4>
<blockquote>
  <p>{</p>

  <p><strong><em>method:</em></strong></p>
  <ul>
    <li><code class="highlighter-rouge">TipBox()</code>; Constructor
      <ul>
        <li>Input: None</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">payTips(float tips)</code>; put tips into TipBox
      <ul>
        <li>Return value: None</li>
        <li>Input: the value of tips that needs to be put in TipBox</li>
        <li>Output: none</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">getTips()</code>; Get the total amount of current tips in TipBox
      <ul>
        <li>Return value type: float</li>
        <li>Input: None</li>
        <li>Output: the total amount of tips in TipBox</li>
      </ul>
    </li>
  </ul>

  <p><strong><em>Attributes:</em></strong></p>
  <ul>
    <li><code class="highlighter-rouge">total</code>; Indicates the total amount of tips in the current TipBox
      <ul>
        <li>Data type: float</li>
      </ul>
    </li>
  </ul>

  <p>};</p>

  <hr />
</blockquote>

<h4 id="description-of-the-classes">Description of the classes</h4>
<ul>
  <li>For the Table class, it represents a table with a certain number of dishes, so it needs to contain the maximum number of dishes that can hold, the current number of dishes, and the content variables of the dishes (randomly generated during construction).</li>
  <li>For the Customer class, it represents a customer who has a demand for dishes, so it needs to contain the maximum number of wanted, the current number of wanted, and the variable of the wanted content (randomly generated during construction).</li>
  <li>For the TipBox class, it represents a box for storing tips, so a variable that contains the current number of tips is needed.</li>
</ul>

<blockquote>
  <p>When the three objects are successfully constructed, the first dish of the Table is taken
out in each cycle to determine whether this dish is needed in the customer’s wanted. If it is
needed, remove the corresponding wanted and put a random amount of tips into the TipBox ,
And then enter the next cycle; if the dish is not needed in wanted, then enter the next cycle. Until
at least one of Table or Customer is empty.</p>
</blockquote>

<h3 id="uml">UML</h3>

<table>
  <thead>
    <tr>
      <th>Table</th>
      <th>Customer</th>
      <th>TipBox</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">Table(int maxSize)</code></td>
      <td><code class="highlighter-rouge">Customer(int maxCount)</code></td>
      <td><code class="highlighter-rouge">TipBox()</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">addDish()</code>: void</td>
      <td><code class="highlighter-rouge">indexWanted(int e)</code>: int</td>
      <td><code class="highlighter-rouge">payTips(float tips)</code>: void</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">takeDish()</code>: bool</td>
      <td><code class="highlighter-rouge">full()</code>: bool</td>
      <td><code class="highlighter-rouge">getTips()</code>: float</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">empty()</code>: bool</td>
      <td><code class="highlighter-rouge">printWanted()</code>: void</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">printDishes()</code>: void</td>
      <td><code class="highlighter-rouge">getWanted(int index)</code>: int</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getDish(int index)</code>: int</td>
      <td><code class="highlighter-rouge">takeWanted(int index)</code>: bool</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">maxSize</code>: int</td>
      <td><code class="highlighter-rouge">maxCount</code>: int</td>
      <td><code class="highlighter-rouge">total</code>: float</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">count</code>: int</td>
      <td><code class="highlighter-rouge">size</code>: int</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="compare-and-contrast-execution-time-of-the-library-code-between-demo-application-and-comparison-application">Compare and Contrast execution time of the library code between demo application and comparison application</h3>
<h4 id="the-native-comparison-application-execution-time">The native comparison application execution time</h4>
<blockquote>
  <p>Our native comparison application is written from C/C++ code and we set the code to loop 40 times and automatically record the results and execution time in a .txt file named: 1-40. (saved in the data folder)</p>
</blockquote>

<p><img src="/Pic/lab2-1.jpg" alt="Screenshot.1" title="Screenshot.1" />
Screenshot.1 The first execution of the native comparison application</p>

<h4 id="the-demo-application-execution-time">The demo application execution time</h4>
<blockquote>
  <p>Our demo application is creating objects based on js calls to C/C++. We set the code to loop 40 times and print the results and execution time of each run on the web page, and print the total execution time results of the 40 runs in the web console. The File Name:Test Web (number).txt output in the console indicates that JS called the function exported in C/C++ used to write the results of each run to a .txt file the same as the native comparison application, but for unknown reasons the file was not generated, I tried to find out the solution, but did not solve the problem, so the results of each run were printed on the web page.(The screenshot is saved in the data folder and shows below)</p>
</blockquote>

<p><img src="/Pic/lab2-2.jpg" alt="Screenshot.2" title="Screenshot.2" />
Screenshot.2 The execution of the demo application</p>

<h4 id="extra-credit-attempt-to-improve-performance-of-wasm-code-if-possible-by-modifying-native-andor-javascript-code">Extra Credit: Attempt to improve performance of WASM code, if possible, by modifying native and/or JavaScript code.</h4>

<blockquote>
  <p>In figure2, we can see that the lower right corner of the screenshot of the demo application running on the web side shows the execution time of each run after 40 runs. We can easily find that after 27 runs, the next run time is much larger than the previous run time, which leads to our data performance is not good enough. After consulting the information, I found that the :innerHTML attribute consumes memory and CPU during the execution of the “+=” operation, causing the subsequent operations to be slower than the previous ones. Optimization idea: Add the data that needs to be printed to the web page in each loop before the end of each loop, and then use the “+=” operation to add to the innerHTML attribute. Finally, the optimized result is shown in figure3 (the pre-optimized part is annotated in the js code main.js, and the optimized code is added as the final code, which is saved in main.js in the code folder):</p>
</blockquote>

<p><img src="/Pic/lab2-3.jpg" alt="Screenshot.3" title="Screenshot.3" />
Screenshot.3 The execution of the demo application after improving.</p>

<h3 id="the-total-execution-time-and-confidence-intervals">The Total execution time and confidence intervals.</h3>
<blockquote>
  <p>We import the 40 execution times of the demo application and the native application 40 execution times into Excel sheet2 and sheet1 respectively, and show confidence intervals for execution time at 95% confidence interval in the table interval. (The Excel sheet is saved in the data folder)</p>
</blockquote>

<h3 id="discussion">Discussion</h3>
<blockquote>
  <p>Because we don’t know whether the obtained code execution time data conforms to the normal distribution, we enter the execution time data into the Excel table and calculate the 95% confidence interval according to the formula of the T distribution. The obtained results are displayed in the Excel table and stored In the data folder.</p>
  <ul>
    <li>For the native comparison application results, the 95% confidence interval is <kbd>[1.401799066,1.422050934]</kbd>, the average execution time. Is 1.411925ms.</li>
  </ul>
</blockquote>

<p><img src="/Pic/lab2-4.jpg" alt="Screenshot.4" title="Screenshot.4" />
Screenshot.4 Native execution time and confidence interval</p>

<ul>
  <li>For the demo appl icat ion resul t , the 95% confidence interval is <kbd>[7.367394997,13.157605]</kbd>, the average execution time is 10.2625ms.</li>
</ul>

<p><img src="/Pic/lab2-5.jpg" alt="Screenshot.5" title="Screenshot.5" />
Screenshot.5 Web execution time and confidence interval</p>

<p>Extra Credit: perform same analysis above on any optimizations performed on code base.</p>

<p><img src="/Pic/lab2-6.jpg" alt="Screenshot.6" title="Screenshot.6" />
Screenshot.6 Web execution time and confidence interval after improving</p>

<ul>
  <li>Comparing the Sheet2 and Sheet3, we can find that the average execution time reduced from 10.2625 to 5.7025, Standard Deviation reduced from 9.052421983 to 1.249697463. This means that we have played a very good role in the optimization of JS code, and the running time of each time is more continuous and stable.</li>
</ul>

<h3 id="download-1"><strong><em><a href="https://github.com/Yvonhu/repo/tree/main/Lab2">Download</a></em></strong></h3>

<h3 id="back-to-home-1"><strong><em>Back to <a href="/">Home</a></em></strong></h3>

</div>

<a class="back-button" href=" /news/" title="Other stories">&larr; Other stories</a>

</article>
</div><!-- end wrapper -->

</div>

<footer class="site-footer cf">
<div class="wrapper">

<ul>
<li>Email: <a href="mailto:regmtait@gmail.com" title="Email us">regmtait@gmail.com</a> • <a href="https://github.com/regmtait/Toasty-Jekyll" title="Download from GitHub">Download</a> site source</li>
</ul>

</div>
</footer>

</body>

</html>